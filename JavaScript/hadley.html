<!doctype html>
<html lang="en">
<head>
 <meta charset="UTF-8">
 <title>Introduction to Callbacks</title>
 <script>
  // declare the wizard
  var wizard = {
   // wizard attributes:
   health: 500,
   mana: 500,
   // wizard spells:
   spells: {
    open_sesame: {mana_cost: 10},
    chain_lightning: {mana_cost: 20},
    fireball: {mana_cost: 30}
   },
   // wizard abilities
   cast_spell: function(spell, callback) {
        // declare caster to be available for the callback function below
        var caster = this;
        var der = Math.floor(Math.random() * 100);
        if(der < 20)
        {
          console.log("spell sucked");
        }
        else
        {
          // Math.random() * (max - min) + min;
          wizard.mana -= spell; 
        } // close else statement
        console.log("Spell casted! The wizard's current mana pool is "+wizard.mana);

        var arr2 = [ wizard.spells.open_sesame.mana_cost, 
                    wizard.spells.chain_lightning.mana_cost, 
                    wizard.spells.fireball.mana_cost ];
        var random2 = arr2[ Math.floor(arr2.length * Math.random()) ];
        if(wizard.mana > 0)
        {
          callback(random2, wizard.cast_spell);
        }
        else
        {
          return console.log("your wizard is dead");
        }
    } // close cast_spell
  } // close wizard object


var arr = [ wizard.spells.open_sesame.mana_cost, 
            wizard.spells.chain_lightning.mana_cost, 
            wizard.spells.fireball.mana_cost ];
var random1 = arr[ Math.floor(arr.length * Math.random()) ];

  var spellR = function(){ console.log("Spell casted! The wizard's current mana pool is "+wizard.mana); };

  //wizard.cast_spell(random1, spellR);
  wizard.cast_spell(random1, wizard.cast_spell);
  //wizard.cast_spell(random1, spellR);
  //wizard.cast_spell(random1, spellR);
  //wizard.cast_spell(random1, spellR);
  //wizard.cast_spell(random1, spellR);


 </script>
</head>
<body>
</body>
</html>